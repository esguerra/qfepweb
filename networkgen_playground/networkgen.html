<!doctype html>
<HTML>
<HEAD>
  <meta charset="utf-8" />
  <TITLE>FEP Network</TITLE>

  <!-- NPM (http://visjs.org/index.html#download_install): -->
  <!-- <script type="text/javascript" src="node_modules/vis/dist/vis.min.js"></script> -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>

  <!-- Needed for JSON file import (https://stackoverflow.com/questions/33392557/vis-js-simple-example-edges-do-not-show): -->
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

  <!-- http://visjs.org/index.html#download_install -->
  <!-- <link rel="stylesheet" type="text/css" href="node_modules/vis/dist/vis.css"> -->
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css">

  <style type="text/css">
    #mynetwork {
        /* width: 600px; */
        width: 100%;
        height: 700px;
        border: 2px solid lightgray;
    }
    </style>
</HEAD>

<BODY>

<div id="mynetwork"></div>

<!-- Add an invisible <div> element to the document, to hold the JSON data: -->
<div id="networkJSON-results" class="results" style="display:none"></div>

<script type="text/javascript">

  // -------------------------------------------------------------------------
  // OPTIONS:

  // http://visjs.org/docs/network/#modules
  // http://visjs.org/docs/network/edges.html#
  // http://visjs.org/docs/network/physics.html#

var options = {
  // ------------------------------------
  // GENERAL
  nodes: {
  // could also make write PNGs as circular images, then set shape : image and omit size: n.
  // probably should do this. node clicking is inconsistent currently.
  //shape: "image",
  borderWidth: 1,
  shape: "image",
  shapeProperties: {
     useBorderWithImage : true
  },
  size: 70,
  font : {
    size : 19,
    color : 'blue'
  },
  color: {
    border: "#222222",
    background: "white",
    highlight: {
        border: '#2B7CE9',
        background: "white"
        }
  }},
  "edges": {
    color: "lightgray",
    "smooth": false
//      {
//      "forceDirection": "none"
//    }
  },
  // ------------------------------------
  // PHYSICS
  "physics": {
    "barnesHut": {
      "gravitationalConstant": -8850,
      "springLength": 190,
      "springConstant": 0.035,
      "avoidOverlap": 1
    },
    "minVelocity": 0.75
  },
  // ------------------------------------
  // MANIPULATION
  manipulation: {
    addNode : false,
    addEdge: function(edgeData,callback) {
        callback(edgeData);
    }
  }
  }

// -------------------------------------------------------------------------
// IMPORT DATA FROM JSON:

var json = $.getJSON("data/graph.json")
  .done(function(data){
    var data = {
      nodes: data.nodes,
      edges: data.edges
    };
    var network = new vis.Network(container, data, options);
      network.setOptions({
//          disable physics after model has loaded: https://stackoverflow.com/questions/32403578/stop-vis-js-physics-after-nodes-load-but-allow-drag-able-nodes
            physics: {enabled:true}
    });
  });

var container = document.getElementById('mynetwork');

// TODO
// save adjusted JSON to file
// change nodes to be circular image shapes.
// make JSfiddle for github
// adjust edit mode buttons (in visjs source code)
// related: do we need all above imports? if so, do we need local vis installation?
    
</script>

</BODY>
</HTML>


var options = {
  "nodes": {
    "borderWidthSelected": null,
    "color": {
      "border": "#222222",
      "background": "white",
      "highlight": {
        "background": "white"
      },
      "hover": {}
    },
    "font": {
      "color": "blue",
      "size": 19,
      "strokeWidth": null
    },
    "scaling": {
      "min": null,
      "max": null
    },
    "shape": "image",
    "shapeProperties": {
      "borderRadius": null
    },
    "size": 70
  },
  "edges": {
    "smooth": false
  },
  "manipulation": {
    "enabled": true
  },
  "physics": {
    "barnesHut": {
      "gravitationalConstant": -8850,
      "springLength": 190,
      "springConstant": 0.035,
      "avoidOverlap": 1
    },
    "minVelocity": 0.75
  }
}